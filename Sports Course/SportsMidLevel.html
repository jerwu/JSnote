<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>运动中级课程</title>
    <!--多物体运动框架-->
        <!--例一：多个物体同时运动-->
        <!--例子：多个Div，鼠标移入变宽
        -单定时器，存在问题
        -每个Div一个定时器-->
    <style>
        /*div{width:100px;height:50px;background-color:blue;margin-top:50px;}*/
    </style>
    <script>
        //window.onload = function () {
        //    var aDiv = document.getElementsByTagName("div");
            
        //    for (var i = 0; i < aDiv.length; i++) {
        //        aDiv[i].timer = null;
        //        aDiv[i].onmouseover = function () {
        //            startMove(this,300);
        //        }

        //        aDiv[i].onmouseout = function () {
        //            startMove(this,100);
        //        }
        //    }
        //}

        //function startMove(obj,iTarget) {
        //    clearInterval(obj.timer);
        //    obj.timer = setInterval(function () {
        //        var iSpeed = (iTarget - obj.offsetWidth) / 8;
        //        iSpeed = obj.offsetWidth < iTarget ? Math.ceil(iSpeed) : Math.floor(iSpeed);

        //        if (obj.offsetWidth == iTarget) {
        //            clearInterval(obj.timer);
        //        }
        //        else {
        //            obj.style.width = obj.offsetWidth + iSpeed + "px";
        //        }
        //    }, 30);
        //}
    </script>

        <!--例二：多个div淡入淡出-->
        <!--*定时器作为物体的属性
        *参数的传递：物体、目标值-->
    <style>
        div{width:100px;height:100px;background-color:blue;filter:alpha(opacity=50);opacity:0.5;margin:20px;}
    </style>
    <script>
        window.onload = function () {
           var aDiv = document.getElementsByTagName("div");

           for (var i = 0; i < aDiv.length; i++) {
               aDiv[i].timer = null;
               aDiv[i].alpha = 50;
               aDiv[i].onmouseover = function () {
                   startMove(this, 100);
               }

               aDiv[i].onmouseout = function () {
                   startMove(this, 50);
               }
           }
        }

        function startMove(obj, iTarget) {
           clearInterval(obj.timer);
           obj.timer = setInterval(function () {
               var iSpeed = (iTarget - obj.alpha) / 8;
               iSpeed = iSpeed > 0 ? Math.ceil(iSpeed) : Math.floor(iSpeed);

               if (obj.alpha == iTarget) {
                   clearInterval(obj.timer);
               }
               else {
                   obj.alpha += iSpeed;
                   obj.style.filter = "alpha(opacity:" + obj.alpha + ")";
                   obj.style.opacity = obj.alpha / 100;
                   document.title = obj.alpha;
               }
           }, 30);
        }
    </script>

    <!--任意值运动框架-->
    <style>
        div{width:50px;height:50px;background-color:#ff006e;margin:50px;font-size:14px;}
    </style>
    <script>
        // window.onload = function () {
        //    var aDiv = document.getElementsByTagName("div");

        //    for (var i = 0; i < aDiv.length; i++) {
        //        aDiv[i].timer = null;
        //         aDiv[0].onclick = function () {
        //            startMove(this, "width", 300);
        //         }

        //         aDiv[1].onclick = function () {
        //            startMove(this, "height", 200);
        //         }

        //         aDiv[2].onclick = function () {
        //            startMove(this, "fontSize", 100);
        //         }
        //    }
        // }
        // //取非行间样式的值
        // function getStyle(obj, attr) {
        //    if (obj.currentStyle) {
        //        return obj.currentStyle[attr];
        //    }
        //    else {
        //        return getComputedStyle(obj, false)[attr];
        //    }
        // }

        // function startMove(obj,attr,iTarget) {
        //    clearInterval(obj.timer);
        //    obj.timer = setInterval(function () {
        //        var iCur = parseInt(getStyle(obj, attr));//出错点：忘了getStyle(obj, attr)的值是一个字符串，需要转换成整数才能用
        //        var iSpeed = (iTarget - iCur) / 8;
        //        iSpeed = iSpeed > 0 ? Math.ceil(iSpeed) : Math.floor(iSpeed);

        //        if (iCur == iTarget) {
        //            clearInterval(obj.timer);
        //        }
        //        else {
        //            obj.style[attr] = iCur + iSpeed + "px";
        //        }
        //    }, 30);
        // }
    </script>

    <!--任意值运动框架：有意思扩展-->
    <style>
      /*  #div1{width:100px;height:50px;background-color:blue;border:1px solid black;}*/
    </style>
    <script>
        // function getStyle(obj,attr){
        //    if (obj.currentStyle) {
        //        return obj.currentStyle[attr];
        //    }
        //    else {
        //        return getComputedStyle(obj,false)[attr];
        //    }
        // }

        // setInterval(function () {
        //    var oDiv = document.getElementById("div1");

        //    // oDiv.style.width = oDiv.offsetWidth - 1 + "px";

        //    //取行间样式
        //    // oDiv.style.width = parseInt(oDiv.style.width) - 1 + "px";

        //    //取非行间样式
        //    oDiv.style.width = parseInt(getStyle(oDiv, "width")) - 1 + "px";
        // }, 30);
    </script>

    <!--任意值框架结合图片的淡入淡出-->
    <style>
       /* div {width: 100px;height: 100px; background-color: blue;margin: 50px;filter: alpha(opacity=50);opacity: 0.5;}*/
    </style>
    <script>
        // window.onload = function () {
        //     var aDiv = document.getElementsByTagName("div");

        //     for (var i = 0; i < aDiv.length; i++) {
        //         aDiv[i].timer = null;
        //         aDiv[i].onmouseover = function () {
        //             startMove(this, "opacity", 100);
        //         }
        //         aDiv[i].onmouseout = function () {
        //             startMove(this, "opacity", 50);
        //         }
        //     }
        // }

        // function getStyle(obj, attr) {
        //     if (obj.currentStyle) {
        //         return obj.currentStyle[attr];
        //     }
        //     else {
        //         return getComputedStyle(obj, false)[attr];
        //     }
        // }

        // function startMove(obj, attr, iTarget) {

        //     clearInterval(obj.timer);
        //     obj.timer = setInterval(function () {
        //         var iCur = 0;
        //         if (attr == "opacity") {
        //             iCur = parseInt(parseFloat(getStyle(obj, attr)) * 100);
        //         }
        //         else {
        //             iCur = parseInt(getStyle(obj, attr));
        //         }

        //         var iSpeed = (iTarget - iCur) / 8;
        //         iSpeed = iSpeed > 0 ? Math.ceil(iSpeed) : Math.floor(iSpeed);

        //         if (iCur == iTarget) {
        //             clearInterval(obj.timer);
        //         }
        //         else {
        //             if (attr == "opacity") {
        //                 obj.style.filter = "alpha(opacity=" + (iCur + iSpeed) + ")";
        //                 obj.style.opacity = (iCur + iSpeed) / 100;
        //             }
        //             else {
        //                 obj.style[attr] = iCur + iSpeed + "px";
        //             }
        //         }
        //     }, 30);
        // }
    </script>

</head>
<body>
    <!--多物体运动框架-->
        <!--例一：多个物体同时运动-->
    <!--<div></div>
    <div></div>
    <div></div>-->

        <!--例二：多个div淡入淡出-->
    <div></div>
    <div></div>
    <div></div>

    <!--任意值运动框架-->
    <!-- <div></div>
    <div></div>
    <div>heiheihei</div> -->

    <!--任意值运动框架：有意思扩展-->
    <!-- <div id="div1"></div> -->

    <!--任意值框架结合图片的淡入淡出-->
    <!-- <div></div>
    <div></div>
    <div></div> -->
</body>
</html>
