<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>拖拽的面向对象转换第一步</title>
    <script>
        var odiv = null;
        var disX = 0;
        var disY = 0;
        var l = 0;
        var t = 0;

        window.onload = function () {
            oDiv = document.getElementById("div1");

            oDiv.onmousedown = MouseDown;
        }

        function MouseDown(ev) {
            var oEvent = ev || event;
            disX = oEvent.clientX - oDiv.offsetLeft;
            disY = oEvent.clientY - oDiv.offsetTop;

            document.onmousemove = MouseMove;

            document.onmouseup = MouseUp;
        }

        function MouseMove(ev) {
            var oEvent = ev || event;
            //oDiv.style.left = oEvent.clientX - disX + "px";
            //oDiv.style.top = oEvent.clientY - disY + "px";

            l = oEvent.clientX - disX;
            t = oEvent.clientY - disY;

            if (l < 0) {
                l = 0;
            }
            else if (l > document.documentElement.clientWidth - oDiv.offsetWidth) {
                l = document.documentElement.clientWidth - oDiv.offsetWidth;
            }
            if (t < 0) {
                t = 0;
            }
            else if (t > document.documentElement.clientHeight - oDiv.offsetHeight) {
                t = document.documentElement.clientHeight - oDiv.offsetHeight;
            }
            oDiv.style.left = l + "px";
            oDiv.style.top = t + "px";
        }

        function MouseUp() {
            document.onmousemove = null;
            document.onmouseup = null;
        }
    </script>
    <script>
        ////把拖拽改写成对于面向对象的形式
        //function MouseDown(ev) {
        //    var oEvent = ev || event;
        //    var disX = oEvent.clientX - oDiv.offsetLeft;
        //    var disY = oEvent.clientY - oDiv.offsetTop;
        //}

        //function MouseMove(ev) {
        //    var oEvent = ev || event;
        //    //oDiv.style.left = oEvent.clientX - disX + "px";
        //    //oDiv.style.top = oEvent.clientY - disY + "px";

        //    var l = oEvent.clientX - disX;
        //    var t = oEvent.clientY - disY;

        //    if (l<0) {
        //        l = 0;
        //    }
        //    else if (l > document.documentElement.clientWidth - oDiv.offsetWidth) {
        //        l = document.documentElement.clientWidth - oDiv.offsetWidth;
        //    }
        //    if (t < 0) {
        //        t = 0;
        //    }
        //    else if (t > document.documentElement.clientHeight - oDiv.offsetHeight) {
        //        t = document.documentElement.clientHeight - oDiv.offsetHeight;
        //    }
        //    oDiv.style.left = l + "px";
        //    oDiv.style.top = t + "px";
        //}

        //function MouseUp() {
        //    document.onmousemove = null;
        //    document.onmouseup = null;
        //}
    </script>

</head>

<body>
    <div id="div1" style="width:100px;height:100px;background-color:#0094ff;position:absolute"></div>
</body>
</html>

